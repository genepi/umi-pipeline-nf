nextflow_process {

    name "Test Process POLISH_CLUSTER_minimal"
    script "lib/processes/polish_cluster.nf"
    process "POLISH_CLUSTER"

    test("Should use gpu") {
        when {
            params{
                use_gpu = true
            }
            process {
                """
                input[0] = Channel.of(["barcode03", "raw", "$baseDir/tests/input/polish_cluster/barcode03/smolecule0sub12.fastq"])
                input[1] = "Consensus"
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
